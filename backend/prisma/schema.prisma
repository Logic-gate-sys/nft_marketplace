generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}


// --------------------- SCHEMA -----------------------------------------

model Collection {
  col_uri   String
  create_at DateTime   @default(now())
  id        Int        @id @default(autoincrement())
  user_id   Int
  User      User       @relation(fields: [user_id], references: [id])
  Listings  Listings[]
  Nft       Nft[]
}

model Listings {
  col_id     Int
  nft_id     Int
  price      BigInt
  owner      String
  listed_at  DateTime   @default(now())
  id         Int        @id @default(autoincrement())
  Collection Collection @relation(fields: [col_id], references: [id])
}

model Nft {
  id         Int   @unique    @id @default(autoincrement())
  col_id     Int
  uri    String?
  token_id   Int
  owner_id   Int
  Collection Collection @relation(fields: [col_id], references: [id])
  User       User       @relation(fields: [owner_id], references: [id])
}

model Sold {
  tokenId Int
  from    String
  to      String
  amount  Int
  at      DateTime @default(now())
  id      Int      @id @default(autoincrement())
}

model User {
  id         Int          @id @default(autoincrement())
  username   String?
  wallet     String       @unique
  email      String?
  Collection Collection[]
  Nft        Nft[]
}
